## 智能二次元成分检测平台

这里是一个为二次元用户提供的二次元问题智能答题平台。用户可以在这里浏览不同主题的动漫题库，并且可以浏览、回答题库中的问题，以此来测试用户自己是否是这个主题动漫的真爱粉。本平台仅供娱乐使用，且集成了大语言模型功能，如果对参考回答不满意，可以请求结合大语言模型给出答案。

目前，为了题目管理的便捷，只有管理员可以创建题库，以及添加相应的题目。如果需要自定义题目，可以申请成为管理员。

项目的架构如下图所示：

![未命名绘图 drawio](https://github.com/user-attachments/assets/ca840040-1fc7-47ba-9d52-eea11c427c1f)

底层的数据存储主要基于Redis、MySQL以及ElasticSearch。用户相关数据和问题数据进行分库处理；Redis数据库用于记录用户每日签到情况；ElasticSearch提供分词查询的功能，更方便用户查找特定主题的问题。

主要服务：

1.用户签到 基于 Redis BitMap + Redisson 实现用户签到情况的记录以及统计。

2.分词搜索：使用 Elastic Search 代替 MySQL 模糊查询，并通过为索引绑定 ik 分词器实现了更灵活的分词搜索。

3.网站限流： 基于Sentinel实现网站的熔断以及限流功能，保障访问的安全性。

4.定时任务： 使用 Spring Scheduler 定时同步近期发生更新的 MySQL 题目到 ES，并通过唯一 id 保证每条数据同步的准确性。

5.数据库配置：引入 Druid 连接池来监控慢 SQL

6.访问限制： 为限制恶意用户访问，基于 WebFilter + BloomFilter 实现 IP 黑名单拦截，并通过 Nacos 配置中心动态更新黑名单，便于维护。

7.AI集成：通过自己编写的RPC框架(https://github.com/M0N0L/rpc-Framework) 与SpringAI项目进行交互，SpringAI将服务注册至Etcd注册中心，答题平台作为消费者使用服务。如果用户对参考答案不满意，可以使用AI功能获得模型反馈的结果，模型基于ZHIPU-FLASH。

8.鉴权： 通过Sa-Token实现鉴权以及同端的冲突检测。

9.基础管理服务： 提供增加、删除、查询、修改题库信息、题目信息的功能。通过MyBatisPlus实现批量向题库中添加题目。

10.分库服务： 用户信息与题目信息分为不同的库，利用MyBatis-Plus提供的多数据源实现，减小单个库的压力。

控制层：控制层主要是提供用户控制、题目控制以及题库控制三个功能。

用户层：基于Swagger Models对接口进行调用、测试以及调试。
